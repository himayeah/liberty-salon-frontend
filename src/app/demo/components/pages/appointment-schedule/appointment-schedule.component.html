<div class="container my-4">
  <!-- Appointment Schedule Form -->
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">Appointment Schedule</h4>
    </div>
    <div class="card-body">
      <form [formGroup]="appointmentScheduleForm" (ngSubmit)="onSubmit()">
        <div class="form-grid">
          <mat-form-field class="full-width">
            <mat-label>Service Name</mat-label>
            <input matInput placeholder="Enter Service Name" formControlName="serviceName"/>
            <span class="text-danger"
              *ngIf="appointmentScheduleForm.get('serviceName') && appointmentScheduleForm.get('serviceName').touched && appointmentScheduleForm.get('serviceName').errors && appointmentScheduleForm.get('serviceName').errors['required']">
              Enter Service Name
            </span>
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Service Description</mat-label>
            <input matInput placeholder="Enter brief Description" formControlName="serviceDescription"/>
            <span class="text-danger"
              *ngIf="appointmentScheduleForm.get('serviceDescription') && appointmentScheduleForm.get('serviceDescription').touched && appointmentScheduleForm.get('serviceDescription').errors && appointmentScheduleForm.get('serviceDescription').errors['required']">
              Enter brief Description
            </span>
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="serviceDate" />
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <span class="text-danger" *ngIf="(appointmentScheduleForm.get('serviceDate').touched || submitted) && appointmentScheduleForm.get('serviceDate').errors?.['required']">
              Date is required
            </span>
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Time</mat-label>
            <input matInput formControlName="serviceTime" placeholder="e.g., 10:30 AM" />
            <span class="text-danger" *ngIf="(appointmentScheduleForm.get('serviceTime').touched || submitted) && appointmentScheduleForm.get('serviceTime').errors?.['required']">
              Time is required
            </span>
          </mat-form-field>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-end mt-4">
          <button type="submit" mat-raised-button color="primary" [disabled]="isButtonDisabled">{{saveButtonLabel}}</button>
          <button type="button" mat-stroked-button class="ms-2" (click)="resetData()">Reset</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Table Section -->
  <div class="card shadow-sm mt-5">
    <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Appointment Information</h4>
      <button mat-icon-button (click)="refreshData()" matTooltip="Refresh">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" class="table table-hover align-middle">
          <!-- Service Name Column -->
          <ng-container matColumnDef="serviceName">
            <th mat-header-cell *matHeaderCellDef>Service Name</th>
            <td mat-cell *matCellDef="let element">{{element.serviceName}}</td>
          </ng-container>

          <!-- Service Description Column -->
          <ng-container matColumnDef="serviceDescription">
            <th mat-header-cell *matHeaderCellDef>Description</th>
            <td mat-cell *matCellDef="let element">{{element.serviceDescription}}</td>
          </ng-container>

          <!-- Date Column -->
          <ng-container matColumnDef="serviceDate">
            <th mat-header-cell *matHeaderCellDef>Date</th>
            <td mat-cell *matCellDef="let element">{{element.serviceDate}}</td>
          </ng-container>

          <!-- Time Column -->
          <ng-container matColumnDef="serviceTime">
            <th mat-header-cell *matHeaderCellDef>Time</th>
            <td mat-cell *matCellDef="let element">{{element.serviceTime}}</td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button color="primary" (click)="editData(element)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" (click)="deleteData(element)">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>

      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of appointments"></mat-paginator>
    </div>
  </div>
</div>
